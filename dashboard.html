<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emission Trends | Carbon Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body class="trends-body">
    
    <nav class="navbar">
        <div class="nav-logo">
            <i class="fa-solid fa-leaf"></i> CarbonTracker
        </div>
        
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="scorecard.html" class="accent-link">Leaderboard</a></li>
        </ul>

        <div id="authSection">
            <div id="publicNav">
                <button onclick="location.href='index.html#portal-section'" class="navbar-btn btn-login-nav">
                    <i class="fa-solid fa-user"></i> Login
                </button>
            </div>
        </div>
    </nav>

    <main>
        <header class="trends-header">
            <h1>Global Emission Trends</h1>
            <p>Real-time analytics for <span id="companyNameDisplay" class="accent bold">Global Market</span></p>
        </header>

        <div id="alertContainer" class="alert-box hidden">
            <div class="alert-inner">
                <span class="alert-emoji">⚠️</span>
                <div>
                    <strong class="alert-title">Action Required</strong>
                    <p id="alertMessage" class="alert-text">You have pending reports.</p>
                </div>
            </div>
            <button onclick="location.href='company-dashboard.html'" class="btn-outline-warning">Review</button>
        </div>

        <!-- Metrics Row -->
        <div class="metrics-grid three-cards">
            <div class="metric-card green">
                <h3>Total Emissions</h3>
                <p class="big-number" id="totalEmissions">0.00</p>
                <span class="muted">tCO₂e (All Time)</span>
            </div>

            <div class="metric-card gold">
                <h3 id="thirdCardTitle">Total Reports</h3>
                <p class="big-number" id="pendingCount">0</p>
                <small id="thirdCardContext" class="muted">Submitted across network</small>
            </div>

            <div class="metric-card">
                <h3>YoY Change</h3>
                <p class="big-number" id="yoyValue">N/A</p>
                <small class="muted">Compared to last year</small>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls-container" style="align-items:center; gap:18px;">
            <div style="display:flex; gap:12px; align-items:center;">
                <label class="muted" style="font-weight:700;">Filter:</label>
                <select id="yearFilter" style="padding:8px 10px; border-radius:8px; border:1px solid #e6f4ea;">
                    <option value="all">All Years</option>
                    <option value="2026">2026</option>
                    <option value="2025">2025</option>
                    <option value="2024">2024</option>
                </select>
            </div>

            <div class="search-box" style="flex:1; max-width:420px;">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" id="searchInputFilter" placeholder="Search company, city or state...">
            </div>

            <div class="muted small accent" style="white-space:nowrap;">
                <i class="fa-solid fa-info-circle"></i> Live network data
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-grid" style="align-items:flex-start;">
            <div class="chart-container" style="flex:2; min-width: 320px;">
                <h3 class="section-title"><i class="fa-solid fa-chart-line"></i> Emission History</h3>
                <div id="timeChartPlaceholder" class="chart-placeholder visible">
                    <i class="fa-solid fa-chart-line chart-placeholder-icon"></i>
                    <p>No emission data yet</p>
                    <span class="muted">Submit reports to see trends over time</span>
                </div>
                <div id="timeChartWrap" class="chart-wrapper hidden" style="height: 360px;">
                    <canvas id="timeChart" aria-label="Emission history line chart"></canvas>
                </div>
            </div>

            <div style="flex:1; min-width:280px; display:flex; flex-direction:column; gap:20px;">
                <div class="chart-container" style="height:260px;">
                    <h3 class="section-title"><i class="fa-solid fa-pie-chart"></i> Source Breakdown</h3>
                    <div id="categoryChartPlaceholder" class="chart-placeholder visible">
                        <i class="fa-solid fa-pie-chart chart-placeholder-icon"></i>
                        <p>No category data yet</p>
                        <span class="muted">Breakdown by electricity, fuel, travel & waste</span>
                    </div>
                    <div id="categoryChartWrap" class="chart-wrapper hidden" style="height:200px;">
                        <canvas id="categoryChart" aria-label="Emission source breakdown doughnut chart"></canvas>
                    </div>
                </div>

                <div class="metric-card" style="padding: 16px;">
                    <h4 style="margin-bottom:6px;">Top Contributors</h4>
                    <ul id="topContributors" style="list-style:none; padding-left:0; margin-top:8px;">
                        <li class="muted">No data yet</li>
                    </ul>
                </div>
            </div>
        </div>

        <div style="margin-top:18px; font-size:0.9rem; color:#64748b;">
            Data source: Aggregated verified submissions on the CarbonTracker Network.
        </div>
    </main>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fa-solid fa-leaf"></i> CarbonTracker</h3>
                <p>Building a sustainable future through verified carbon tracking.</p>
            </div>

            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="company-register.html">Register Company</a></li>
                    <li><a href="auditor-register.html">Register Auditor</a></li>
                    <li><a href="dashboard.html">View Trends</a></li>
                    <li><a href="scorecard.html">Leaderboard</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h4>Contact Us</h4>
                <p><i class="fa-solid fa-envelope"></i> <strong>Email:</strong> support@carbontracker.com</p>
                <p><i class="fa-solid fa-phone"></i> <strong>Phone:</strong> +1 (800) 123-4567</p>
                <p><i class="fa-solid fa-location-dot"></i> <strong>Address:</strong> 123 Green Street, Eco City, EC 12345</p>
            </div>
        </div>
    </footer>

    <script type="module" src="dashboard.js"></script>
</body>
</html>